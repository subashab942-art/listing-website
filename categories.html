<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Properties – FurniHome</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #e74c3c;
            --accent-color: #3498db;
            --light-color: #f8f9fa;
            --dark-color: #2c3e50;
            --gray-color: #95a5a6;
            --border-radius: 12px;
            --box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }







        /* FILTER SECTION */
        .filter-section {
            padding: 20px 40px;
            background: white;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .filter-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 30px;
            font-weight: 600;
            color: var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .results-info {
            color: var(--gray-color);
            font-size: 16px;
        }

        /* PRODUCTS GRID */
        .products-container {
            padding: 30px 40px 70px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        /* PRODUCT CARD */
        .product {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .product:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
        }

        .product-image-container {
            position: relative;
            cursor: pointer;
            overflow: hidden;
        }

        .product-image {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-bottom: 1px solid #f0f0f0;
            transition: transform 0.5s ease;
        }

        .product-image-container:hover .product-image {
            transform: scale(1.05);
        }

        .product-image-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: var(--transition);
        }

        .product-image-container:hover .product-image-overlay {
            opacity: 1;
        }

        .product-image-overlay span {
            background: white;
            color: var(--primary-color);
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 600;
            font-size: 14px;
        }

        .product-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .product h4 {
            margin: 0 0 8px;
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .product-category {
            color: var(--accent-color);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .product-rating {
            margin: 8px 0;
            color: #FFC107;
            font-size: 14px;
        }

        .rating-count {
            color: var(--gray-color);
            font-size: 14px;
            margin-left: 5px;
        }

        .product p {
            color: var(--gray-color);
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.5;
            flex-grow: 1;
        }

        .price-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        .price {
            color: var(--secondary-color);
            font-weight: 800;
            font-size: 22px;
        }

        .like-btn {
            border: none;
            background: none;
            font-size: 20px;
            cursor: pointer;
            transition: var(--transition);
            color: #ddd;
            padding: 5px;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .like-btn:hover {
            background-color: rgba(231, 76, 60, 0.1);
        }

        .like-btn.liked {
            color: var(--secondary-color);
        }

        .product-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--secondary-color);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            z-index: 2;
        }

        /* PRODUCT DETAILS MODAL */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .product-modal {
            background: white;
            border-radius: var(--border-radius);
            max-width: 1000px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            display: none;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.4s ease;
        }

        .modal-overlay.active .product-modal {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .modal-content {
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 768px) {
            .modal-content {
                flex-direction: row;
            }
        }

        .modal-image-container {
            flex: 1;
            padding: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f9f9f9;
        }

        .modal-image {
            max-width: 100%;
            max-height: 400px;
            object-fit: contain;
            border-radius: 8px;
        }

        .modal-details {
            flex: 1;
            padding: 30px;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            color: var(--gray-color);
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .modal-close:hover {
            background: rgba(0, 0, 0, 0.05);
            color: var(--secondary-color);
        }

        .modal-category {
            color: var(--accent-color);
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
        }

        .modal-title {
            font-size: 28px;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .modal-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .modal-stars {
            color: #FFC107;
            font-size: 18px;
        }

        .modal-price {
            font-size: 32px;
            font-weight: 800;
            color: var(--secondary-color);
            margin-bottom: 25px;
        }

        .modal-description {
            color: var(--gray-color);
            line-height: 1.7;
            margin-bottom: 25px;
            font-size: 16px;
        }

        .modal-features {
            margin-bottom: 30px;
        }

        .modal-features h4 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .features-list {
            list-style: none;
        }

        .features-list li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .features-list li i {
            color: var(--secondary-color);
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .modal-btn {
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: var(--transition);
            font-size: 16px;
            flex: 1;
            min-width: 150px;
        }

        .btn-primary {
            background: var(--secondary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #c0392b;
        }

        .btn-secondary {
            background: var(--primary-color);
            color: white;
        }

        .btn-secondary:hover {
            background: #1a252f;
        }

        .btn-outline {
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-outline:hover {
            background: var(--primary-color);
            color: white;
        }

        /* EMPTY STATE */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            grid-column: 1 / -1;
        }

        .empty-state i {
            font-size: 60px;
            color: #ddd;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .empty-state p {
            color: var(--gray-color);
            max-width: 500px;
            margin: 0 auto;
        }

        /* FOOTER */
        footer {
            background: var(--primary-color);
            color: white;
            padding: 40px;
            text-align: center;
            margin-top: 40px;
        }

        .footer-logo {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .footer-logo span {
            color: var(--secondary-color);
        }

        .footer-text {
            color: rgba(255, 255, 255, 0.7);
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .copyright {
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Responsive */
        @media (max-width: 1100px) {
            .products {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 850px) {
            .products {
                grid-template-columns: repeat(2, 1fr);
            }

            header {
                padding: 15px 25px;
                flex-direction: column;
                gap: 20px;
            }

            header nav {
                gap: 20px;
            }

            .page-header,
            .filter-section,
            .products-container {
                padding-left: 25px;
                padding-right: 25px;
            }

            .page-header h1 {
                font-size: 36px;
            }

            .product-modal {
                max-width: 95%;
            }
        }

        @media (max-width: 600px) {
            .products {
                grid-template-columns: 1fr;
            }

            .filter-section {
                flex-direction: column;
                align-items: flex-start;
            }

            .page-header h1 {
                font-size: 32px;
            }

            .modal-content {
                flex-direction: column;
            }

            .modal-image-container {
                padding: 20px;
            }

            .modal-details {
                padding: 20px;
            }

            .modal-title {
                font-size: 24px;
            }

            .modal-price {
                font-size: 28px;
            }
        }

        @media (max-width: 480px) {
            header nav {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }

            .page-header,
            .filter-section,
            .products-container {
                padding-left: 20px;
                padding-right: 20px;
            }

            .page-header h1 {
                font-size: 28px;
            }

            .modal-actions {
                flex-direction: column;
            }

            .modal-btn {
                width: 100%;
            }
        }
    </style>
</head>

<body>

    <div id="nav"></div>

    <!-- PAGE HEADER -->
    <div class="page-header">
        <h1>All Properties</h1>
        <p>Discover our curated collection of premium furniture for every room in your home.</p>
    </div>

    <!-- FILTER SECTION -->
    <div class="filter-section">
        <div class="filter-container">
            <button class="filter-btn active" data-category="all">All Items</button>
            <button class="filter-btn" data-category="chairs">Chairs</button>
            <button class="filter-btn" data-category="sofas">Sofas</button>
            <button class="filter-btn" data-category="tables">Tables</button>
            <button class="filter-btn" data-category="beds">Beds</button>
            <button class="filter-btn" data-category="berow">Dressers</button>
        </div>
        <div class="results-info">
            Showing <span id="product-count">20</span> products
        </div>
    </div>

    <!-- PRODUCTS -->
    <div class="products-container">
        <div class="products">
            <!-- Product cards will be generated dynamically via JS -->
        </div>
    </div>

    <!-- PRODUCT DETAILS MODAL -->
    <div class="modal-overlay" id="productModalOverlay">
        <div class="product-modal">
            <button class="modal-close" id="modalClose">&times;</button>
            <div class="modal-content">
                <div class="modal-image-container">
                    <img class="modal-image" id="modalImage" src="" alt="Product Image">
                </div>
                <div class="modal-details">
                    <div class="modal-category" id="modalCategory"></div>
                    <h2 class="modal-title" id="modalTitle"></h2>

                    <div class="modal-rating">
                        <div class="modal-stars" id="modalStars"></div>
                        <span class="rating-count" id="modalRatingCount"></span>
                    </div>

                    <div class="modal-price" id="modalPrice"></div>

                    <p class="modal-description" id="modalDescription"></p>

                    <div class="modal-features">
                        <h4>Features</h4>
                        <ul class="features-list" id="modalFeatures">
                            <!-- Features will be added via JavaScript -->
                        </ul>
                    </div>

                    <div class="modal-actions">
                        <button class="modal-btn btn-primary" id="addToCartBtn">
                            <i class="fas fa-shopping-cart"></i> Add to Cart
                        </button>
                        <button class="modal-btn btn-secondary" id="buyNowBtn">
                            <i class="fas fa-bolt"></i> Buy Now
                        </button>
                        <button class="modal-btn btn-outline" id="addToWishlistBtn">
                            <i class="far fa-heart"></i> Add to Wishlist
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <div class="footer-logo">Furni<span>Home</span></div>
        <p class="footer-text">Bringing elegance and comfort to your home with our premium furniture collection since
            2010.</p>
        <div class="copyright">
            © 2023 FurniHome. All rights reserved. | Privacy Policy | Terms of Service
        </div>
    </footer>

    <script>
        window.ACTIVE_PAGE = "categories";

        /* ✅ load navbar + apply active */
        fetch("nav.html")
            .then(res => res.text())
            .then(data => {
                document.getElementById("nav").innerHTML = data;

                document.querySelectorAll(".nav-center a").forEach(link => {
                    link.classList.remove("active");
                    if (link.dataset.page === window.ACTIVE_PAGE) {
                        link.classList.add("active");
                    }
                });
            });



        // Toggle like heart
        function toggleLike(button) {
            button.classList.toggle("liked");
        }

        // All products with more details
        const allProducts = [
            {
                id: 1,
                name: "Modern Wooden Chair",
                category: "chairs",
                price: "₹1,999",
                img: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Y2hhaXJ8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60",
                rating: "★★★★☆",
                ratingCount: 124,
                description: "This modern wooden chair combines ergonomic design with premium wood finish for maximum comfort and style. Perfect for dining rooms, offices, or as an accent piece in any living space.",
                features: [
                    "Premium solid wood construction",
                    "Ergonomic back support",
                    "Water-resistant finish",
                    "Easy assembly required",
                    "Weight capacity: 250 lbs"
                ],
                dimensions: "18'' W x 20'' D x 36'' H",
                material: "Solid Oak Wood",
                color: "Natural Wood Finish",
                stock: 45
            },
            {
                id: 2,
                name: "Ergonomic Office Chair",
                category: "chairs",
                price: "₹3,499",
                img: "https://images.unsplash.com/photo-1598300042247-d088f8ab3a91?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8Y2hhaXJ8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60",
                rating: "★★★★★",
                ratingCount: 89,
                description: "Designed for comfort during long working hours, this ergonomic office chair features adjustable height, lumbar support, and breathable mesh back.",
                features: [
                    "Adjustable seat height",
                    "Lumbar support",
                    "360° swivel rotation",
                    "Breathable mesh back",
                    "5-year warranty"
                ],
                dimensions: "25'' W x 27'' D x 45'' H",
                material: "Mesh & PU Leather",
                color: "Black",
                stock: 32
            },
            {
                id: 3,
                name: "Minimalist Dining Chair",
                category: "chairs",
                price: "₹2,299",
                img: "https://images.unsplash.com/photo-1549497538-303791108f95?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGNoYWlyfGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60",
                rating: "★★★★☆",
                ratingCount: 67,
                description: "Simple yet elegant design perfect for modern dining rooms. These chairs feature a sleek profile and comfortable cushioned seat.",
                features: [
                    "Minimalist Scandinavian design",
                    "Upholstered seat cushion",
                    "Sturdy metal legs",
                    "Stackable for storage",
                    "Easy to clean"
                ],
                dimensions: "17'' W x 18'' D x 32'' H",
                material: "Fabric & Steel",
                color: "Gray",
                stock: 78
            },
            {
                id: 4,
                name: "Luxury Leather Sofa",
                category: "sofas",
                price: "₹14,999",
                img: "https://images.unsplash.com/photo-1540574163026-643ea20ade25?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c29mYXxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60",
                rating: "★★★★★",
                ratingCount: 203,
                description: "Premium leather sofa with superior comfort and elegant design. Features deep seating and high-density foam cushions for ultimate relaxation.",
                features: [
                    "100% genuine leather",
                    "High-density foam cushions",
                    "Solid hardwood frame",
                    "Includes 2 throw pillows",
                    "10-year warranty on frame"
                ],
                dimensions: "86'' W x 38'' D x 32'' H",
                material: "Genuine Leather",
                color: "Brown",
                stock: 12
            },
            {
                id: 5,
                name: "Classic Wooden Dresser",
                category: "berow",
                price: "₹18,999",
                img: "https://images.unsplash.com/photo-1594026112284-02bb6f3352fe?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8ZHJlc3NlcnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60",
                rating: "★★★★★",
                ratingCount: 78,
                description: "Ample storage with elegant wood craftsmanship. This dresser features smooth-gliding drawers and a durable finish that resists scratches.",
                features: [
                    "6 spacious drawers",
                    "Smooth ball-bearing slides",
                    "Anti-tip safety device",
                    "Scratch-resistant finish",
                    "Includes mirror"
                ],
                dimensions: "60'' W x 18'' D x 32'' H",
                material: "Solid Mahogany",
                color: "Cherry Finish",
                stock: 8
            },
            {
                id: 6,
                name: "Wooden Dining Table",
                category: "tables",
                price: "₹9,499",
                img: "https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dGFibGV8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60",
                rating: "★★★☆☆",
                ratingCount: 92,
                description: "Solid wood table perfect for family dining. Seats up to 8 people comfortably and features a durable, easy-to-clean surface.",
                features: [
                    "Seats 8 people",
                    "Solid wood construction",
                    "Extendable leaves (optional)",
                    "Scratch-resistant top",
                    "Easy assembly"
                ],
                dimensions: "72'' L x 40'' W x 30'' H",
                material: "Solid Teak Wood",
                color: "Natural Wood",
                stock: 15
            },
            {
                id: 7,
                name: "King Size Bed Frame",
                category: "beds",
                price: "₹22,999",
                img: "https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YmVkfGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60",
                rating: "★★★★★",
                ratingCount: 167,
                description: "Luxurious king size bed frame with upholstered headboard. Features sturdy construction and elegant design for your bedroom sanctuary.",
                features: [
                    "Upholstered headboard",
                    "Under-bed storage",
                    "Solid wood slats",
                    "Easy assembly",
                    "15-year warranty"
                ],
                dimensions: "76'' W x 80'' L x 42'' H",
                material: "Fabric & Solid Wood",
                color: "Charcoal Gray",
                stock: 6
            }
        ];

        // Get query parameter from URL
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Modal elements
        const modalOverlay = document.getElementById('productModalOverlay');
        const modalClose = document.getElementById('modalClose');
        const modalImage = document.getElementById('modalImage');
        const modalCategory = document.getElementById('modalCategory');
        const modalTitle = document.getElementById('modalTitle');
        const modalStars = document.getElementById('modalStars');
        const modalRatingCount = document.getElementById('modalRatingCount');
        const modalPrice = document.getElementById('modalPrice');
        const modalDescription = document.getElementById('modalDescription');
        const modalFeatures = document.getElementById('modalFeatures');
        const addToCartBtn = document.getElementById('addToCartBtn');
        const buyNowBtn = document.getElementById('buyNowBtn');
        const addToWishlistBtn = document.getElementById('addToWishlistBtn');

        // Open modal with product details
        function openProductModal(product) {
            // Set modal content
            modalImage.src = product.img;
            modalImage.alt = product.name;
            modalCategory.textContent = product.category.charAt(0).toUpperCase() + product.category.slice(1);
            modalTitle.textContent = product.name;
            modalStars.textContent = product.rating;
            modalRatingCount.textContent = `(${product.ratingCount} reviews)`;
            modalPrice.textContent = product.price;
            modalDescription.textContent = product.description;

            // Clear previous features
            modalFeatures.innerHTML = '';

            // Add features
            if (product.features) {
                product.features.forEach(feature => {
                    const li = document.createElement('li');
                    li.innerHTML = `<i class="fas fa-check"></i> ${feature}`;
                    modalFeatures.appendChild(li);
                });
            }

            // Add additional product info
            if (product.dimensions) {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fas fa-ruler-combined"></i> Dimensions: ${product.dimensions}`;
                modalFeatures.appendChild(li);
            }

            if (product.material) {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fas fa-cube"></i> Material: ${product.material}`;
                modalFeatures.appendChild(li);
            }

            if (product.color) {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fas fa-palette"></i> Color: ${product.color}`;
                modalFeatures.appendChild(li);
            }

            if (product.stock) {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fas fa-boxes"></i> In Stock: ${product.stock} units`;
                modalFeatures.appendChild(li);
            }

            // Show modal
            modalOverlay.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent scrolling
        }

        // Close modal
        function closeProductModal() {
            modalOverlay.classList.remove('active');
            document.body.style.overflow = 'auto'; // Restore scrolling
        }

        // Get clicked category from URL
        const urlCategory = getQueryParam('category');

        // Filter products by category if category is passed in URL
        let filteredProducts = allProducts;
        if (urlCategory) {
            filteredProducts = allProducts.filter(p => p.category === urlCategory);
            // Activate the corresponding filter button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.dataset.category === urlCategory) {
                    btn.classList.add('active');
                } else if (btn.dataset.category === 'all') {
                    btn.classList.remove('active');
                }
            });
        }

        // Render products dynamically
        function renderProducts(products) {
            const productsContainer = document.querySelector('.products');
            const productCountElement = document.getElementById('product-count');

            productCountElement.textContent = products.length;

            if (products.length === 0) {
                productsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-box-open"></i>
                        <h3>No Products Found</h3>
                        <p>We couldn't find any furniture matching your criteria. Try selecting a different category or check back soon for new arrivals.</p>
                    </div>
                `;
                return;
            }

            productsContainer.innerHTML = "";

            products.forEach(p => {
                const card = document.createElement('div');
                card.className = 'product';

                // Add badge for top-rated products
                const badge = p.ratingCount > 150 ? '<div class="product-badge">Popular</div>' : '';

                card.innerHTML = `
                    ${badge}
                    <div class="product-image-container" data-product-id="${p.id}">
                        <img class="product-image" src="${p.img}" alt="${p.name}" loading="lazy">
                        <div class="product-image-overlay">
                            <span>View Details</span>
                        </div>
                    </div>
                    <div class="product-content">
                        <div class="product-category">${p.category.charAt(0).toUpperCase() + p.category.slice(1)}</div>
                        <h4>${p.name}</h4>
                        <div class="product-rating">
                            ${p.rating} <span class="rating-count">(${p.ratingCount})</span>
                        </div>
                        <p>${p.description.substring(0, 80)}...</p>
                        <div class="price-container">
                            <span class="price">${p.price}</span>
                            <button class="like-btn" onclick="toggleLike(this)"><i class="far fa-heart"></i></button>
                        </div>
                    </div>
                `;
                productsContainer.appendChild(card);

                // Add click event to image container
                const imageContainer = card.querySelector('.product-image-container');
                imageContainer.addEventListener('click', () => {
                    openProductModal(p);
                });

                // Also allow clicking on the product name
                const productName = card.querySelector('h4');
                productName.style.cursor = 'pointer';
                productName.addEventListener('click', () => {
                    openProductModal(p);
                });
            });
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function () {
            // Render initial products
            renderProducts(filteredProducts);

            // Add filter button functionality
            document.querySelectorAll('.filter-btn').forEach(button => {
                button.addEventListener('click', function () {
                    // Update active button
                    document.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');

                    const category = this.dataset.category;

                    // Filter products
                    let filtered = allProducts;
                    if (category !== 'all') {
                        filtered = allProducts.filter(p => p.category === category);
                    }

                    // Render filtered products
                    renderProducts(filtered);
                });
            });

            // Modal close functionality
            modalClose.addEventListener('click', closeProductModal);
            modalOverlay.addEventListener('click', function (e) {
                if (e.target === modalOverlay) {
                    closeProductModal();
                }
            });

            // Close modal with Escape key
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape' && modalOverlay.classList.contains('active')) {
                    closeProductModal();
                }
            });

            // Add liked state to heart icons when clicked
            document.addEventListener('click', function (e) {
                window.ACTIVE_PAGE = "categories";
                if (e.target.classList.contains('fa-heart') || e.target.classList.contains('like-btn')) {
                    const heartIcon = e.target.classList.contains('fa-heart') ? e.target : e.target.querySelector('.fa-heart');
                    if (heartIcon) {
                        heartIcon.classList.toggle('far');
                        heartIcon.classList.toggle('fas');
                    }
                }
            });

            // Modal button actions
            addToCartBtn.addEventListener('click', function () {
                const productName = modalTitle.textContent;
                alert(`"${productName}" has been added to your cart!`);
            });

            buyNowBtn.addEventListener('click', function () {
                const productName = modalTitle.textContent;
                alert(`Proceeding to checkout for "${productName}"`);
            });

            addToWishlistBtn.addEventListener('click', function () {
                const heartIcon = this.querySelector('i');
                heartIcon.classList.toggle('far');
                heartIcon.classList.toggle('fas');

                const productName = modalTitle.textContent;
                if (heartIcon.classList.contains('fas')) {
                    alert(`"${productName}" added to wishlist!`);
                } else {
                    alert(`"${productName}" removed from wishlist!`);
                }
            });
        });
        fetch("nav.html")
            .then(res => res.text())
            .then(data => {
                document.getElementById("nav").innerHTML = data;
            });
        const ACTIVE_PAGE = "categories";
    </script>

</body>

</html>